<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Login / Cadastro - StoryWorld</title>
  <style>
    body { font-family: Arial, sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; }
    .container { display:flex; flex-direction:column; gap:10px; }
    input, button { padding:10px; font-size:16px; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Login / Cadastro</h2>
    <input type="email" id="email" placeholder="Email">
    <input type="text" id="username" placeholder="Nome de usu치rio">
    <input type="password" id="password" placeholder="Senha">
    <button onclick="register()">Cadastrar</button>
    <button onclick="login()">Entrar</button>
    <p id="message"></p>
  </div>

  <script>
    function register() {
      const email = document.getElementById('email').value;
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      if(!email || !username || !password){
        document.getElementById('message').textContent = "Preencha todos os campos!";
        return;
      }

      // Salva usu치rio no localStorage
      const users = JSON.parse(localStorage.getItem('users') || '[]');

      if(users.find(u => u.email === email)){
        document.getElementById('message').textContent = "Email j치 cadastrado!";
        return;
      }

      users.push({email, username, password, premium:false});
      localStorage.setItem('users', JSON.stringify(users));
      document.getElementById('message').textContent = "Cadastro realizado com sucesso!";
    }

    function login() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      const users = JSON.parse(localStorage.getItem('users') || '[]');
      const user = users.find(u => u.email === email && u.password === password);

      if(user){
        localStorage.setItem('currentUser', JSON.stringify(user));
        document.getElementById('message').textContent = "Login realizado!";
        // Redireciona pra p치gina inicial ou de escrita
        setTimeout(()=> window.location.href='index.html', 1000);
      } else {
        document.getElementById('message').textContent = "Email ou senha incorretos!";
      }
    }
  </script>
</body>
</html>
