<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CatÃ¡logo de HistÃ³rias | StoryWorld</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="header-content">
      <h1>CatÃ¡logo de HistÃ³rias</h1>
      <button id="themeToggle" class="theme-toggle">ğŸŒ™</button>
    </div>
  </header>

  <main>
    <div class="filter-box">
      <input type="text" id="filterInput" placeholder="Filtrar por tÃ­tulo ou gÃªnero...">
      <button onclick="filterStories()">ğŸ” Buscar</button>
    </div>

    <div id="catalogContainer"></div>

    <nav>
      <a href="index.html">ğŸ  InÃ­cio</a>
      <a href="writer.html">âœï¸ Escrever</a>
    </nav>
  </main>

  <footer>
    <p>Â© 2025 StoryWorld â€” Explore infinitos mundos de leitura</p>
  </footer>

  <script>
    // ==== Dark mode reaproveitado ====
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      body.classList.add('dark-mode');
      themeToggle.textContent = 'â˜€ï¸';
    }
    themeToggle.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      const isDark = body.classList.contains('dark-mode');
      themeToggle.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    // ==== Mostrar histÃ³rias ====
    const stories = JSON.parse(localStorage.getItem('stories') || '[]');
    const container = document.getElementById('catalogContainer');

    function renderStories(list) {
      container.innerHTML = list.length ? list.map(story => `
        <div class="story-card">
          <img src="${story.coverUrl || 'https://via.placeholder.com/100x140?text=Capa'}" alt="${story.title}">
          <div>
            <h3>${story.title}</h3>
            <p><strong>GÃªnero:</strong> ${story.topic || 'Sem gÃªnero'}</p>
            <p>${story.chapters[0]?.substring(0, 100) || 'Sem descriÃ§Ã£o...'}...</p>
          </div>
        </div>
      `).join('') : '<p>Nenhuma histÃ³ria encontrada.</p>';
    }

    function filterStories() {
      const query = document.getElementById('filterInput').value.toLowerCase();
      const filtered = stories.filter(story =>
        story.title.toLowerCase().includes(query) ||
        story.topic.toLowerCase().includes(query)
      );
      renderStories(filtered);
    }

    renderStories(stories);
  </script>
</body>
</html>
